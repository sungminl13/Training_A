# Work Log

아래는 작업 종료 시 기록을 누적하는 로그입니다. 날짜별 섹션을 추가해 계속 이어서 기록합니다.

## 2026-01-26

### 왜 요청했고 무엇을 목표로 했나
- 파일 기반 MVP로 시작하는 PKV 시스템의 초기 설계 문서를 만들고, 이후 코딩 시 기준 지침으로 삼기 위함.
- UI/UX 흐름과 데이터 모델을 미리 확정해 구현 중 혼선을 줄이고, 토큰/문서 관리 비용도 줄이려는 목적.
- 웹 UI의 에러 메시지/다국어 처리 구조를 공용화해 일관된 메시지 관리가 가능하도록 하기 위함.

### 핵심 변경 사항 (내용별)
- 시스템 다이어그램/데이터 모델 문서화
  - `docs/pkv-diagrams.md`에 시스템 흐름도/도메인 모델 다이어그램 작성.
  - 각 문서에 한국어 설명을 추가해 목적/배경을 남김.
- UX 시퀀스 다이어그램 추가
  - UC1~UC3에 대한 Mermaid 시퀀스 다이어그램 정리.
  - idempotency/재시도 전략 요약.
- 메시지/다국어 구조 공용화
  - 메시지 카탈로그를 `packages/messages`로 분리.
  - `messages.json`/`messages.md`로 코드:언어:메시지 구조 관리.
  - `getMessage`, `resolveLanguage` 등 유틸 추가.
  - 웹 UI에서 브라우저 언어 + 사용자 선택(쿠키) 기반 언어 선택.
- UI 개선 및 안정화
  - 링크 API fetch 실패 시 예외를 던지지 않고 빈 배열 처리.
  - API 베이스 URL을 환경변수로 분리.
  - 언어 선택 UI 구성 추가.
- 문서/파일 경량화 계획
  - 전체 파일 유지/삭제 후보를 `docs/file-retention-audit.md`에 정리.
  - 비핵심 문서/테스트/임시 파일 삭제 진행.

### 중요한 질문/요청 (요약)
- "이 메시지를 나중에 에러코드 기반으로 관리하고 싶다" → 메시지 카탈로그 공용화.
- "문서들이 많아 토큰을 많이 쓴다" → 파일 유지/삭제 후보 정리 및 비핵심 삭제.
- "SSH 없이 HTTPS로 푸시했는데 꼭 SSH 필요하냐" → SSH 방식으로 전환 및 키 등록 안내.
- "오늘 작업분 커밋/푸시" → 커밋 후 SSH 인증으로 푸시 완료.

### 커밋/배포 관련
- 커밋: `feat: update docs, i18n, and cleanup`
- 푸시 완료 (SSH 인증 설정 이후)

### 참고 파일
- 설계/문서: `docs/pkv-diagrams.md`, `docs/pkv-sequence-diagrams.md`
- 메시지/다국어: `packages/messages/*`, `apps/web/app/i18n.ts`, `apps/web/app/components/language-select.tsx`
- UI 변경: `apps/web/app/page.tsx`
- 파일 정리 기준: `docs/file-retention-audit.md`

### 내가 배운 것 / 중요한 것
- 문서가 많아질수록 토큰/컨텍스트 비용이 커지므로, 핵심 문서만 유지하는 기준이 필요함.
- 메시지/다국어 처리는 코드에 하드코딩하지 말고 공용 카탈로그로 관리하는 편이 확장에 유리함.

### 개선 포인트 (AI 코딩 도우미 관점)
- 큰 변경을 한 번에 커밋하기보다, 기능 단위로 작은 커밋을 쪼개면 추적과 롤백이 쉬움.
- Dev 프로세스 중복 실행을 방지하기 위해 실행 상태 확인 습관(예: `ps`, `lsof`)을 유지하면 렌더링 지연을 줄일 수 있음.

### 내일 할 것
- vault-core / ai-providers / shared 패키지 구조 설계 초안 만들기.
- API 엔드포인트 및 파일 저장 규칙 상세화.

## 2026-01-27

### 왜 요청했고 무엇을 목표로 했나
- 2일차 실습 결과를 별도 라우트로 분리해 확인하기 위함.
- 기존 홈 페이지는 그대로 유지하면서 추가 페이지로 학습 내용을 남기려는 목적.

### 핵심 변경 사항 (내용별)
- 2일차 페이지 추가
  - `apps/web/app/day2/page.tsx`에 간단한 소개 페이지 구성.
- 작업 로그 기록
  - 오늘 작업 내용을 `docs/work-log.md`에 추가.

### 중요한 질문/요청 (요약)
- "page.tsx는 그대로 두고 별도 페이지로 만들어달라" → `/day2` 페이지로 분리.
- "새로 만든 페이지 링크만 알려달라" → `/day2` 경로 안내.
- "작업 로그를 남겨달라" → 오늘자 섹션 추가.

### 커밋/배포 관련
- 커밋: `2일차 페이지 추가 및 작업 로그 기록`
- 푸시: 완료

### 참고 파일
- `/day2` 페이지: `apps/web/app/day2/page.tsx`
- 작업 로그: `docs/work-log.md`

### 내가 배운 것 / 중요한 것
- 나의 소감은 짧지만 연속적인 작업을 했다.
- 홈 페이지는 유지하고 실습 페이지를 별도로 분리하면 변경 관리가 쉬움.

### 개선 포인트 (AI 코딩 도우미 관점)
- 작업 요청이 "미래 계획"인지 "즉시 실행"인지 먼저 확인하면 불필요한 수정이 줄어듦.

### 내일 할 것
- Day 3 실습 페이지 작성.

## 2026-01-28

### 왜 요청했고 무엇을 목표로 했나
- DB 없이도 서버 런타임 상태를 확인할 수 있는 health endpoint와 진단 페이지를 만들어 왕복 요청 흐름을 완성하려는 목적.
- 브라우저 → Next.js API → 서버 상태 JSON → 브라우저 표시 + latency 측정 흐름을 확인하려는 목표.

### 핵심 변경 사항 (내용별)
- Health API 추가
  - `apps/web/app/api/health/route.ts`에 상태 정보를 반환하는 엔드포인트 구현.
  - `ts`, `uptimeMs`, `nodeEnv`, `hostname`, `appVersion`, `gitSha` 반환.
- 진단 페이지 추가
  - `/health` 페이지에서 API 호출 결과와 latency 표시.
  - 실패 시 에러 표시 및 Retry 버튼 제공.
  - 초기 렌더 부담을 줄이기 위해 클라이언트 컴포넌트 분리.
- 문서 업데이트
  - `README.md`에 Health Endpoint 사용법 추가.

### 막힌 것/해결
- dev 서버 기동이 sandbox 제한으로 막혀 확인 실패 → 승인 후 서버 기동 및 `/api/health` 응답 확인.

### 내일 할 것
- DB 연결 후보 검토: Postgres + Prisma 또는 Drizzle
