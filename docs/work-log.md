# Work Log

아래는 작업 종료 시 기록을 누적하는 로그입니다. 날짜별 섹션을 추가해 계속 이어서 기록합니다.

## 2026-01-26

### 왜 요청했고 무엇을 목표로 했나
- 파일 기반 MVP로 시작하는 PKV 시스템의 초기 설계 문서를 만들고, 이후 코딩 시 기준 지침으로 삼기 위함.
- UI/UX 흐름과 데이터 모델을 미리 확정해 구현 중 혼선을 줄이고, 토큰/문서 관리 비용도 줄이려는 목적.
- 웹 UI의 에러 메시지/다국어 처리 구조를 공용화해 일관된 메시지 관리가 가능하도록 하기 위함.

### 핵심 변경 사항 (내용별)
- 시스템 다이어그램/데이터 모델 문서화
  - `docs/pkv-diagrams.md`에 시스템 흐름도/도메인 모델 다이어그램 작성.
  - 각 문서에 한국어 설명을 추가해 목적/배경을 남김.
- UX 시퀀스 다이어그램 추가
  - UC1~UC3에 대한 Mermaid 시퀀스 다이어그램 정리.
  - idempotency/재시도 전략 요약.
- 메시지/다국어 구조 공용화
  - 메시지 카탈로그를 `packages/messages`로 분리.
  - `messages.json`/`messages.md`로 코드:언어:메시지 구조 관리.
  - `getMessage`, `resolveLanguage` 등 유틸 추가.
  - 웹 UI에서 브라우저 언어 + 사용자 선택(쿠키) 기반 언어 선택.
- UI 개선 및 안정화
  - 링크 API fetch 실패 시 예외를 던지지 않고 빈 배열 처리.
  - API 베이스 URL을 환경변수로 분리.
  - 언어 선택 UI 구성 추가.
- 문서/파일 경량화 계획
  - 전체 파일 유지/삭제 후보를 `docs/file-retention-audit.md`에 정리.
  - 비핵심 문서/테스트/임시 파일 삭제 진행.

### 중요한 질문/요청 (요약)
- "이 메시지를 나중에 에러코드 기반으로 관리하고 싶다" → 메시지 카탈로그 공용화.
- "문서들이 많아 토큰을 많이 쓴다" → 파일 유지/삭제 후보 정리 및 비핵심 삭제.
- "SSH 없이 HTTPS로 푸시했는데 꼭 SSH 필요하냐" → SSH 방식으로 전환 및 키 등록 안내.
- "오늘 작업분 커밋/푸시" → 커밋 후 SSH 인증으로 푸시 완료.

### 커밋/배포 관련
- 커밋: `feat: update docs, i18n, and cleanup`
- 푸시 완료 (SSH 인증 설정 이후)

### 참고 파일
- 설계/문서: `docs/pkv-diagrams.md`, `docs/pkv-sequence-diagrams.md`
- 메시지/다국어: `packages/messages/*`, `apps/web/app/i18n.ts`, `apps/web/app/components/language-select.tsx`
- UI 변경: `apps/web/app/page.tsx`
- 파일 정리 기준: `docs/file-retention-audit.md`

### 내가 배운 것 / 중요한 것
- 문서가 많아질수록 토큰/컨텍스트 비용이 커지므로, 핵심 문서만 유지하는 기준이 필요함.
- 메시지/다국어 처리는 코드에 하드코딩하지 말고 공용 카탈로그로 관리하는 편이 확장에 유리함.

### 개선 포인트 (AI 코딩 도우미 관점)
- 큰 변경을 한 번에 커밋하기보다, 기능 단위로 작은 커밋을 쪼개면 추적과 롤백이 쉬움.
- Dev 프로세스 중복 실행을 방지하기 위해 실행 상태 확인 습관(예: `ps`, `lsof`)을 유지하면 렌더링 지연을 줄일 수 있음.

### 내일 할 것
- vault-core / ai-providers / shared 패키지 구조 설계 초안 만들기.
- API 엔드포인트 및 파일 저장 규칙 상세화.
